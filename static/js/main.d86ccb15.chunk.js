(this.webpackJsonpdeliveryapp=this.webpackJsonpdeliveryapp||[]).push([[0],{127:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(24),s=a.n(c),i=(a(96),a(25)),o=(a(97),a(89)),l=a(8),j=a(15),d=a(16),u=a.n(d),b={getUsers:function(){return u.a.get("https://deliveryapp-api.herokuapp.com/api/users?page=0&limit=30&name=")},createUser:function(e){return u.a.post("https://deliveryapp-api.herokuapp.com/api/users",e)},getUserById:function(e){return u.a.get("https://deliveryapp-api.herokuapp.com/api/users/"+e)},deleteUser:function(e){return u.a.delete("https://deliveryapp-api.herokuapp.com/api/users/"+e)},updateUser:function(e,t){return u.a.put("https://deliveryapp-api.herokuapp.com/api/users/"+e,t)}},h=a(10),p=a(27),m=a(43),g=a(2);function O(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(g.jsx)(m.a,{bsPrefix:"card createusercard center",children:Object(g.jsxs)(h.a,{onSubmit:function(e){console.log(a),e.preventDefault(),b.createUser(a).then((function(e){console.log(e)}),(function(e){return console.log("deu erro!!!",e)}))},children:[Object(g.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(g.jsx)(h.a.Label,{children:"Name"}),Object(g.jsx)(h.a.Control,{type:"name",placeholder:"Enter name",value:a.name,onChange:function(e){n(Object(j.a)(Object(j.a)({},a),{},{name:e.target.value}))}})]}),Object(g.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(g.jsx)(h.a.Label,{children:"Email address"}),Object(g.jsx)(h.a.Control,{type:"email",placeholder:"Enter email",value:a.email,onChange:function(e){n(Object(j.a)(Object(j.a)({},a),{},{email:e.target.value}))}}),Object(g.jsx)(h.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(g.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(g.jsx)(h.a.Label,{children:"Password"}),Object(g.jsx)(h.a.Control,{type:"password",placeholder:"Password",value:a.password,onChange:function(e){n(Object(j.a)(Object(j.a)({},a),{},{password:e.target.value}))}})]}),Object(g.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(g.jsx)(h.a.Label,{children:"Confirm your Password"}),Object(g.jsx)(h.a.Control,{type:"password",placeholder:"Password"})]}),Object(g.jsx)(p.a,{variant:"success",type:"submit",children:"Submit"})]})})}var x=a(71),f=(a.p,a(87)),v=a(86),y=a(45),w=a(21),k=a.n(w),C=a(60),P=a(59),L=function(){return JSON.parse(localStorage.getItem("user"))},N={login:function(e){return u.a.post("https://deliveryapp-api.herokuapp.com/api/users/login",e)},logout:function(e){return u.a.post("https://deliveryapp-api.herokuapp.com/api/users/logout",{},e)},getCurrentUser:L,authHeader:function(){var e=L();return e&&e.token?{headers:{authorization:e.token}}:{}},hasPermission:function(e){return L().data.permissions==e}},I=a(91),S=a(84);function F(e){var t=e.handleLogin,a=Object(r.useState)({email:"",password:""}),n=Object(i.a)(a,2),c=n[0],s=n[1],o=Object(r.useState)(!1),d=Object(i.a)(o,2),u=d[0],b=d[1],O=Object(r.useState)(!1),x=Object(i.a)(O,2),f=x[0],v=x[1],y=Object(l.useHistory)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(m.a,{bsPrefix:"card logincard center bg-lightergreen melonborder",children:f?Object(g.jsx)(S.a,{animation:"border",role:"status",variant:"success"}):Object(g.jsxs)(h.a,{className:"center bg-lightergreen",onSubmit:function(e){v(!0),e.preventDefault(),N.login(c).then((function(e){localStorage.setItem("user",JSON.stringify(e.data)),t(),y.push("/")}),(function(e){console.log(e.message),b(e.message),v(!1)}))},children:[Object(g.jsxs)(h.a.Group,{className:"mb-3 center",controlId:"formBasicEmail",children:[Object(g.jsx)(h.a.Label,{children:"Email address"}),Object(g.jsx)(h.a.Control,{type:"email",placeholder:"Enter email",value:c.email,onChange:function(e){s(Object(j.a)(Object(j.a)({},c),{},{email:e.target.value}))}}),Object(g.jsx)(h.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(g.jsxs)(h.a.Group,{className:"mb-3 center",controlId:"formBasicPassword",children:[Object(g.jsx)(h.a.Label,{children:"Password"}),Object(g.jsx)(h.a.Control,{type:"password",placeholder:"Password",value:c.password,onChange:function(e){s(Object(j.a)(Object(j.a)({},c),{},{password:e.target.value}))}})]}),u&&Object(g.jsx)(I.a,{variant:"danger",children:" Invalid Credentials!"}),Object(g.jsx)(p.a,{variant:"success",type:"submit",children:"Submit"})]})})})}var B=a.p+"static/media/undraw_ice_cream_s2rh rose.75c0d536.svg";function R(e){var t=e.handleLoginFunc;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(x.a,{className:"center",bsPrefix:"jumbotron fullpage bg-rosequartz",children:Object(g.jsxs)(v.a,{bsPrefix:"toprow bg-lightergreen melonborder row",children:[Object(g.jsx)(y.a,{lg:6,bsPrefix:"center col",children:Object(g.jsx)(f.a,{bsPrefix:"img-fluid overlayimg ",fluid:!0,src:B})}),Object(g.jsxs)(y.a,{lg:6,bsPrefix:"center col",children:[Object(g.jsx)("h3",{children:"Join us today!"}),Object(g.jsx)(O,{}),Object(g.jsxs)("p",{children:["Already have an account?",Object(g.jsx)(P.a,{rootClose:!0,trigger:"click",overlay:Object(g.jsx)(C.a,{id:"popover-trigger-click-root-close",children:Object(g.jsx)(F,{handleLogin:t})}),children:Object(g.jsx)(k.a,{children:" Click here to sign in!"})})]})]})]})})})}a(126);var T=a(29),U=a(28),E=a(72),H=a(33),M=a.p+"static/media/watermelon-icon.14c6f06f.png";function _(e){var t=e.handleLogout,a=Object(l.useHistory)();return Object(g.jsx)(U.a.Item,{onClick:function(){var e=N.authHeader();N.logout(e).then((function(e){localStorage.removeItem("user"),t(),a.push("/")}),(function(e){return Object(g.jsx)("label",{children:e})}))},children:"Logout"})}var A=function(e){var t=e.authStatus,a=e.handleLogout,r=e.handleLogin;return t?Object(g.jsx)(T.a,{bg:"green",expand:"lg",variant:"dark",sticky:"top",collapseOnSelect:"true",children:Object(g.jsxs)(E.a,{children:[Object(g.jsxs)(T.a.Brand,{eventKey:"1",bsPrefix:"navbar-brand brandFont",as:k.a,to:"/",children:[Object(g.jsx)("img",{src:M,width:"30px",height:"30px"}),"Melon"]}),Object(g.jsx)(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(T.a.Collapse,{id:"basic-navbar-nav",children:Object(g.jsxs)(H.a,{className:"ml-auto",children:[Object(g.jsx)(H.a.Link,{eventKey:"1",as:k.a,to:"/",children:"Home"}),Object(g.jsx)(H.a.Link,{eventKey:"1",as:k.a,to:"/restaurants",children:"Restaurants"}),Object(g.jsxs)(U.a,{title:"My Account",id:"basic-nav-dropdown",children:[Object(g.jsx)(U.a.Item,{as:k.a,to:"/myaccount",children:"Change my Data"}),Object(g.jsx)(U.a.Item,{href:"#action/3.2",children:"My Orders"}),Object(g.jsx)(U.a.Item,{href:"#action/3.2",children:"Help"}),Object(g.jsx)(U.a.Divider,{}),Object(g.jsx)(_,{handleLogout:a})]})]})})]})}):Object(g.jsx)(T.a,{bg:"green",expand:"lg",variant:"dark",sticky:"top",collapseOnSelect:"true",children:Object(g.jsxs)(E.a,{children:[Object(g.jsxs)(T.a.Brand,{eventKey:"1",bsPrefix:"navbar-brand brandFont",as:k.a,to:"/",children:[Object(g.jsx)("img",{src:M,width:"30px",height:"30px"}),"Melon"]}),Object(g.jsx)(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(g.jsx)(T.a.Collapse,{id:"basic-navbar-nav",children:Object(g.jsxs)(H.a,{className:"ml-auto",children:[Object(g.jsx)(H.a.Link,{eventKey:"1",as:k.a,to:"/",children:"Home"}),Object(g.jsx)(H.a.Link,{eventKey:"1",as:k.a,to:"/createuser",children:"Create an Account"}),Object(g.jsx)(P.a,{rootClose:!0,trigger:"click",placement:"bottom",overlay:Object(g.jsx)(C.a,{id:"popover-trigger-click-root-close",children:Object(g.jsx)(F,{handleLogin:r})}),children:Object(g.jsx)(H.a.Link,{children:"Login"})}),Object(g.jsxs)(U.a,{title:"More",id:"basic-nav-dropdown",children:[Object(g.jsx)(U.a.Item,{href:"#action/3.2",children:"Help"}),Object(g.jsx)(U.a.Item,{href:"#action/3.2",children:"Contact Us!"})]})]})})]})})},D=a(90),G=["component"],K=function(e){var t=e.split(", ");return(t=t.filter((function(e){return N.hasPermission(e)}))).length>0},J=function(e){var t=e.component,a=Object(D.a)(e,G);return Object(g.jsx)(l.Route,Object(j.a)(Object(j.a)({},a),{},{render:function(e){return N.getCurrentUser()&&K(a.permissions)?Object(g.jsx)(t,Object(j.a)({},e)):Object(g.jsx)(l.Redirect,{to:{pathname:"/login",state:{from:e.location}}})}}))},z=a.p+"static/media/undraw_breakfast_psiw.fdfbdb40.svg",W=a.p+"static/media/undraw_Hamburger_8ge6.f04a3704.svg",q=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(x.a,{className:"center",bsPrefix:"jumbotron bg-lightergreen homecontent",children:Object(g.jsxs)(v.a,{children:[Object(g.jsxs)(y.a,{sm:!0,className:"center",children:[Object(g.jsx)("h1",{children:"Uma frase de efeito!"}),Object(g.jsxs)("p",{children:["Alguma frase legal para atrair leads",Object(g.jsx)("strong",{children:" atrav\xe9s de uma informa\xe7\xe3o relevante "}),"e um bot\xe3o para criar conta."]}),Object(g.jsx)("p",{children:Object(g.jsx)(p.a,{as:k.a,to:"/createuser",bsPrefix:"btn",variant:"success",children:Object(g.jsx)("strong",{children:"Sign up!"})})})]}),Object(g.jsx)(y.a,{sm:!0,children:Object(g.jsx)("img",{className:"img-fluid",src:z})})]})}),Object(g.jsxs)(x.a,{bsPrefix:"jumbotron bg-lighterrose homecontent",children:[Object(g.jsx)("h1",{children:"Hello, world!"}),Object(g.jsx)("p",{children:"This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information."}),Object(g.jsx)("img",{className:"img-fluid",src:W})]})]})},Q=function(){return Object(g.jsx)("h1",{children:"My data is private!!"})},V=function(e){var t=e.name,a=e.img,r=e.description,n=e.rating,c=e.price,s=e.freight;return Object(g.jsxs)(m.a,{bsPrefix:"resourcecard card",style:{width:"18rem"},children:[Object(g.jsx)(m.a.Img,{variant:"top",src:a}),Object(g.jsxs)(m.a.Body,{children:[Object(g.jsx)(m.a.Title,{children:t}),Object(g.jsxs)(m.a.Subtitle,{children:["Rating: ",n]}),Object(g.jsx)(m.a.Text,{children:r}),Object(g.jsxs)(m.a.Footer,{children:[s&&Object(g.jsxs)(g.Fragment,{children:["Freight: ",s," "]}),c&&Object(g.jsxs)(g.Fragment,{children:["Price: ",c," "]})]})]})]})},X=a.p+"static/media/restimg.3f3d86e8.jpg",Y=a(88),Z=a(51),$={getRestaurants:function(e,t,a){var r="https://deliveryapp-api.herokuapp.com/api/restaurants?page=".concat(t,"&limit=").concat(a,"&name=").concat(e);return console.log(r),u.a.get(r)},createRestaurant:function(e){return u.a.post("https://deliveryapp-api.herokuapp.com/api/restaurants",e)},getRestaurantById:function(e){return u.a.get("https://deliveryapp-api.herokuapp.com/api/restaurants/"+e)},deleteRestaurant:function(e){return u.a.delete("https://deliveryapp-api.herokuapp.com/api/restaurants/"+e)},updateRestaurant:function(e,t){return u.a.put("https://deliveryapp-api.herokuapp.com/api/restaurants/"+e,t)}},ee=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(g.jsxs)(x.a,{bsPrefix:"jumbotron listingContainer center bg-lighterrose",children:[Object(g.jsx)(Y.a,{className:"mb-3",size:"lg",children:Object(g.jsx)(Z.a,{bsPrefix:"searchbar form-control",placeholder:"What's your craving for today?","aria-label":"Search","aria-describedby":"basic-addon1",onChange:function(e){return t=e.target.value,void $.getRestaurants(t,0,30).then((function(e){console.log(e.data),n(e.data)}),(function(e){console.log(e)}));var t}})}),Object(g.jsx)(x.a,{bsPrefix:"bg-lighterrose listing jumbotron",children:a.map((function(e){return Object(g.jsx)(V,{name:e.name,img:X,description:"algum texto descritivo sobre  prato ourestaurante",rating:e.rating,freight:e.freight},e._id)}))})]})},te=function(){return Object(g.jsx)("div",{className:"bg-lightergreen center fullpage",children:Object(g.jsx)(ee,{})})};var ae=function(){var e=Object(r.useState)(!!N.getCurrentUser()),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(g.jsxs)(o.a,{children:[Object(g.jsx)(A,{authStatus:a,handleLogout:function(){n(!1)},handleLogin:function(e){n(!0)}}),Object(g.jsx)("div",{className:"App",children:Object(g.jsx)("div",{className:"content",children:Object(g.jsxs)(l.Switch,{children:[Object(g.jsx)(l.Route,{exact:!0,path:"/",children:Object(g.jsx)(q,{})}),Object(g.jsx)(l.Route,{path:"/createuser",children:Object(g.jsx)(R,{handleLoginFunc:function(){n(!0)}})}),Object(g.jsx)(J,{path:"/myaccount",component:Q,permissions:"CLIENT, ADMIN"}),Object(g.jsx)(J,{path:"/restaurants",component:te,permissions:"CLIENT, ADMIN"})]})})})]})},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,132)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(ae,{})}),document.getElementById("root")),re()},96:function(e,t,a){},97:function(e,t,a){}},[[127,1,2]]]);
//# sourceMappingURL=main.d86ccb15.chunk.js.map